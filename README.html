<h1>ğŸ›¡ï¸ Sentinel</h1>
<blockquote>
<p><strong>O guardiÃ£o entre vocÃª e o caos</strong></p>
</blockquote>
<p>Sentinel Ã© um firewall cognitivo para DevOps â€” um CLI inteligente que intercepta comandos perigosos antes que eles causem desastres, respondendo com humor, consciÃªncia contextual e educaÃ§Ã£o tÃ©cnica.</p>
<p><a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://nodejs.org/"><img src="https://img.shields.io/badge/node-%3E%3D20.0.0-brightgreen" alt="Node.js Version"></a>
<a href="https://www.typescriptlang.org/"><img src="https://img.shields.io/badge/TypeScript-5.9+-blue" alt="TypeScript"></a></p>
<h2>ğŸ¯ Filosofia</h2>
<p>Sentinel nÃ£o Ã© apenas um validador de comandos â€” Ã© um <strong>mentor tÃ©cnico com personalidade</strong>. Ele:</p>
<ul>
<li>ğŸ§  <strong>Educa antes de impedir</strong>: Provoca reflexÃ£o tÃ©cnica ao invÃ©s de simplesmente bloquear</li>
<li>ğŸ­ <strong>Tem personalidade</strong>: Usa humor inteligente e sarcasmo leve para tornar a seguranÃ§a memorÃ¡vel</li>
<li>ğŸ” <strong>Ã‰ contextual</strong>: Analisa branch Git, ambiente, horÃ¡rio e padrÃµes de risco</li>
<li>ğŸ“Š <strong>Aprende com vocÃª</strong>: MantÃ©m estatÃ­sticas e histÃ³rico de decisÃµes</li>
<li>ğŸ”Œ <strong>Ã‰ extensÃ­vel</strong>: Sistema de plugins permite customizaÃ§Ã£o total</li>
</ul>
<h2>ğŸš€ InstalaÃ§Ã£o</h2>
<pre><code class="language-bash">npm install -g @isckosta/sentinel
</code></pre>
<h2>âš¡ IntegraÃ§Ã£o AutomÃ¡tica com o Shell</h2>
<p>Para a melhor experiÃªncia, o Sentinel pode se integrar diretamente ao seu terminal para analisar <strong>todos</strong> os comandos que vocÃª executa, sem a necessidade de digitar <code>sentinel exec</code>.</p>
<p>Execute o comando abaixo para o seu shell (Bash ou Zsh):</p>
<pre><code class="language-bash"># Para Zsh (recomendado)
sentinel init zsh

# Para Bash
sentinel init bash
</code></pre>
<p>O comando irÃ¡ gerar um script. Para ativÃ¡-lo, adicione a seguinte linha ao final do seu arquivo de configuraÃ§Ã£o do shell (<code>~/.zshrc</code> para Zsh, <code>~/.bashrc</code> para Bash):</p>
<pre><code class="language-bash"># Adicione esta linha ao seu ~/.zshrc ou ~/.bashrc
eval &quot;$(sentinel init zsh)&quot; # ou bash
</code></pre>
<p>ApÃ³s reiniciar seu terminal, o Sentinel estarÃ¡ ativo e vigiando todos os seus comandos.</p>
<h2>ğŸ“– Uso Manual (Alternativo)</h2>
<p>Se preferir nÃ£o usar a integraÃ§Ã£o automÃ¡tica, vocÃª pode invocar o Sentinel manualmente para cada comando.</p>
<h3>AnÃ¡lise de Comandos</h3>
<p>Execute qualquer comando atravÃ©s do <code>sentinel exec</code>:</p>
<pre><code class="language-bash">sentinel exec prisma migrate reset --force
</code></pre>
<p>Ou, como atalho, simplesmente passe o comando diretamente:</p>
<pre><code class="language-bash">sentinel prisma migrate reset --force
</code></pre>
<h2>ğŸ“Š Comandos DisponÃ­veis</h2>
<ul>
<li><code>sentinel stats</code>: Exibe um relatÃ³rio colorido com estatÃ­sticas de uso.</li>
<li><code>sentinel exec &lt;comando...&gt;</code>: Executa um comando sob a supervisÃ£o do Sentinel.</li>
<li><code>sentinel analyze &lt;comando...&gt;</code>: Analisa um comando e retorna um cÃ³digo de status (0 para seguro, 1 para bloqueado) sem executÃ¡-lo. Usado principalmente pela integraÃ§Ã£o com o shell.</li>
<li><code>sentinel init &lt;bash|zsh&gt;</code>: Gera o script de integraÃ§Ã£o para o shell especificado.</li>
</ul>
<h3>Flags Globais</h3>
<ul>
<li><code>-y, --yes</code>: Auto-aprova comandos de baixo risco (<code>safe</code>).</li>
<li><code>-c, --config &lt;path&gt;</code>: Usa um arquivo de configuraÃ§Ã£o <code>sentinel.yml</code> customizado.</li>
</ul>
<h2>ğŸ¨ Exemplos</h2>
<h3>Comando CrÃ­tico Bloqueado</h3>
<pre><code class="language-bash">$ rm -rf /

ğŸš¨ ALERTA CRÃTICO - COMANDO PERIGOSO DETECTADO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Comando: rm -rf /
Score de Risco: 100/100

Motivos para bloqueio:
  â€¢ Isso vai destruir o sistema. PARE IMEDIATAMENTE.
  â€¢ RemoÃ§Ã£o recursiva forÃ§ada. Verifique o caminho duas vezes.
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ Sentinel recomenda:
  â€¢ NÃ£o executar este comando. Nunca.
  â€¢ Tomar um cafÃ© e repensar suas escolhas.

? VocÃª REALMENTE entende as consequÃªncias deste comando? (y/N)
</code></pre>
<h3>Comando com Aviso</h3>
<pre><code class="language-bash">$ git push --force

âš ï¸  ALERTA DE RISCO MODERADO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Comando: git push --force
Score de Risco: 45/100

Motivos:
  â€¢ Force push pode reescrever histÃ³ria. Equipe estÃ¡ ciente?
  â€¢ Flag --force detectada. Cuidado com o que deseja.
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

? Deseja prosseguir mesmo assim? (y/N)
</code></pre>
<h3>EstatÃ­sticas</h3>
<pre><code class="language-bash">$ sentinel stats

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ›¡ï¸  SENTINEL STATS                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š VisÃ£o Geral
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total de comandos avaliados:  127
  Comandos executados:          115 (90.6%)
  Comandos bloqueados:          12 (9.4%)

âš ï¸  DistribuiÃ§Ã£o de Risco
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ“ Safe:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 98 (77.2%)
  âš  Warning:  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 17 (13.4%)
  âœ– Critical: â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 12 (9.4%)

ğŸš¨ InformaÃ§Ãµes de Incidentes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Ãšltimo incidente:             15 de out, 14:23
  Dias sem autossabotagem:      7 ğŸ‘ (Melhorando)

ğŸ“œ Eventos Recentes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ“ âœ“ out 15, 15:20 safe     npm test
  âœ“ âš  out 15, 14:45 warning  git push --force
  âœ— âœ– out 15, 14:23 critical prisma migrate reset --force
  âœ“ âœ“ out 15, 10:30 safe     npm run build
  âœ“ âœ“ out 14, 18:15 safe     git commit -m &quot;fix&quot;

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ğŸ›¡ï¸  Sentinel estÃ¡ de olho. Continue operando com consciÃªncia.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
</code></pre>
<h2>âš™ï¸ ConfiguraÃ§Ã£o</h2>
<p>Crie um arquivo <code>sentinel.yml</code> na raiz do seu projeto:</p>
<pre><code class="language-yaml">rules:
  - pattern: &quot;*migrate reset*&quot;
    level: critical
    message: &quot;Esse comando parece suicida. Quer pensar de novo?&quot;
    conditions:
      branch: &quot;!main&quot;
      env: &quot;!production&quot;

  - pattern: &quot;*deploy*main*&quot;
    level: critical
    message: &quot;Deploy sem review? TÃ¡ apostando contra o universo?&quot;

  - pattern: &quot;*--force*&quot;
    level: warning
    message: &quot;Flag --force detectada. Cuidado com o que deseja.&quot;

plugins:
  - &quot;./plugins/custom-branch-check.js&quot;
</code></pre>
<h3>NÃ­veis de Risco</h3>
<ul>
<li><strong>safe</strong> (0-39): Comando seguro, executa automaticamente</li>
<li><strong>warning</strong> (40-69): Pede confirmaÃ§Ã£o do usuÃ¡rio</li>
<li><strong>critical</strong> (70-100): Requer confirmaÃ§Ã£o consciente e digitaÃ§Ã£o do comando</li>
</ul>
<h3>CondiÃ§Ãµes</h3>
<ul>
<li><code>branch</code>: Verifica a branch Git atual (use <code>!</code> para negar)</li>
<li><code>env</code>: Verifica o ambiente (production, staging, development)</li>
<li><code>time</code>: Verifica horÃ¡rio (implementaÃ§Ã£o futura)</li>
</ul>
<h2>ğŸ”Œ Sistema de Plugins</h2>
<p>Crie plugins customizados para estender o comportamento do Sentinel:</p>
<pre><code class="language-javascript">// plugins/custom-check.js
module.exports = {
  name: &#39;custom-check&#39;,
  
  evaluate: (command, currentScore) =&gt; {
    // Ajusta o score baseado em lÃ³gica customizada
    if (command.currentBranch === &#39;main&#39;) {
      return currentScore + 15;
    }
    return currentScore;
  },
  
  onEvent: (event) =&gt; {
    // Reage a eventos (opcional)
    if (event.riskLevel === &#39;critical&#39; &amp;&amp; event.executed) {
      console.log(&#39;ALERTA: Comando crÃ­tico executado!&#39;);
    }
  }
};
</code></pre>
<h2>ğŸ§ª HeurÃ­sticas de Risco</h2>
<p>Sentinel aplica mÃºltiplas heurÃ­sticas para calcular o score de risco:</p>
<ul>
<li><strong>Branch principal</strong> (+20): OperaÃ§Ãµes em <code>main</code> ou <code>master</code></li>
<li><strong>Ambiente de produÃ§Ã£o</strong> (+25): Comandos em produÃ§Ã£o</li>
<li><strong>Flag --force</strong> (+30): Uso de flags de forÃ§a</li>
<li><strong>Comandos destrutivos</strong> (+25): <code>delete</code>, <code>drop</code>, <code>reset</code>, <code>destroy</code>, etc.</li>
<li><strong>HorÃ¡rio noturno</strong> (+15): Comandos apÃ³s 22h ou antes de 6h</li>
<li><strong>Deploy no fim de semana</strong> (+20): Deploys em sÃ¡bado ou domingo</li>
<li><strong>MigraÃ§Ãµes de banco</strong> (+15): Comandos <code>migrate</code></li>
</ul>
<h2>ğŸ“Š Telemetria</h2>
<p>Todos os eventos sÃ£o registrados em <code>~/.sentinel/</code>:</p>
<ul>
<li><code>telemetry.log</code>: Log detalhado de todos os comandos</li>
<li><code>stats.json</code>: EstatÃ­sticas agregadas</li>
<li><code>events.json</code>: HistÃ³rico dos Ãºltimos 1000 eventos</li>
</ul>
<h2>ğŸ› ï¸ Desenvolvimento</h2>
<h3>Requisitos</h3>
<ul>
<li>Node.js 20+</li>
<li>TypeScript 5.9+</li>
</ul>
<h3>Setup</h3>
<pre><code class="language-bash"># Clone o repositÃ³rio
git clone https://github.com/isckosta/sentinel.git
cd sentinel

# Instale dependÃªncias
npm install

# Build
npm run build

# Testes
npm test

# Desenvolvimento
npm run dev
</code></pre>
<h3>Scripts</h3>
<ul>
<li><code>npm run build</code>: Compila TypeScript</li>
<li><code>npm run start</code>: Executa versÃ£o compilada</li>
<li><code>npm run dev</code>: Executa com ts-node</li>
<li><code>npm test</code>: Roda testes com Jest</li>
<li><code>npm run lint</code>: Verifica cÃ³digo com ESLint</li>
<li><code>npm run release</code>: Cria nova versÃ£o e publica</li>
</ul>
<h2>ğŸ§ª Testes</h2>
<pre><code class="language-bash">npm test
</code></pre>
<p>Cobertura de testes inclui:</p>
<ul>
<li>Parsing de comandos</li>
<li>CÃ¡lculo de risco</li>
<li>Sistema de plugins</li>
<li>Telemetria e estatÃ­sticas</li>
</ul>
<h2>ğŸ“ Roadmap</h2>
<ul>
<li><input disabled="" type="checkbox"> IntegraÃ§Ã£o com Slack/Discord para alertas</li>
<li><input disabled="" type="checkbox"> Machine learning para detecÃ§Ã£o de padrÃµes</li>
<li><input disabled="" type="checkbox"> Modo de aprendizado (observa sem bloquear)</li>
<li><input disabled="" type="checkbox"> Dashboard web para visualizaÃ§Ã£o de mÃ©tricas</li>
<li><input disabled="" type="checkbox"> IntegraÃ§Ã£o com CI/CD pipelines</li>
<li><input disabled="" type="checkbox"> Suporte a mÃºltiplos times/projetos</li>
<li><input disabled="" type="checkbox"> AnÃ¡lise de impacto baseada em histÃ³rico</li>
</ul>
<h2>ğŸ¤ Contribuindo</h2>
<p>ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor:</p>
<ol>
<li>Fork o projeto</li>
<li>Crie uma branch para sua feature (<code>git checkout -b feature/amazing</code>)</li>
<li>Commit suas mudanÃ§as (<code>git commit -m &#39;Add amazing feature&#39;</code>)</li>
<li>Push para a branch (<code>git push origin feature/amazing</code>)</li>
<li>Abra um Pull Request</li>
</ol>
<h2>ğŸ“„ LicenÃ§a</h2>
<p>MIT Â© MH Solutions</p>
<h2>ğŸ­ Frases do Sentinel</h2>
<p>Algumas das mensagens que vocÃª pode encontrar:</p>
<ul>
<li><em>&quot;Esse comando parece suicida. Quer pensar de novo?&quot;</em></li>
<li><em>&quot;Deploy sem review? TÃ¡ apostando contra o universo?&quot;</em></li>
<li><em>&quot;Nada de bom acontece depois das 22h.&quot;</em></li>
<li><em>&quot;Deploy no fim de semana? Seus planos merecem mais que isso.&quot;</em></li>
<li><em>&quot;Force push pode reescrever histÃ³ria. Equipe estÃ¡ ciente?&quot;</em></li>
<li><em>&quot;DROP DATABASE? SÃ©rio? Respire fundo antes de continuar.&quot;</em></li>
</ul>
<h2>ğŸ’¬ EpÃ­logo</h2>
<p>Sentinel Ã© mais que um CLI â€” Ã© um <strong>guardiÃ£o da sanidade DevOps</strong>. Um software que transforma descuido em aprendizado e impede desastres antes que virem chamados de suporte.</p>
<p><strong>Slogan</strong>: <em>Sentinel â€” o guardiÃ£o entre vocÃª e o caos.</em></p>
<hr>
<p>Feito com ğŸ›¡ï¸ e â˜• por <a href="https://github.com/isckosta">Israel C.</a></p>

